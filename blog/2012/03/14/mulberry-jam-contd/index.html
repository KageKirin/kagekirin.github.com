
<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <title>Mulberry Jam (cont'd) - Code Alchemist</title>
    <meta name="author" content="Chris Helmich">

    
    <meta name="description" content="Mulberry Jam (Cont'd) Follow up on last week&#8217;s post about Mulberry. There have been a couple of changes with Xcode 4.3, iOS 5.1 and some &hellip;">
    
    <meta name="viewport" content="width=device-width; initial-scale=1; maximum-scale=1">

    <link href="/atom.xml" rel="alternate" title="Code Alchemist" type="application/atom+xml">
    <link rel="canonical" href="">
    <link href="/favicon.png" rel="shortcut icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    
    
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-29293069-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<header class="inner"><h1 class="left"><a href="/">Code Alchemist</a></h1>
<nav class="menu left"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<div class="right">
	<form class="search right" action="http://google.com/search" method="get">
		<input class="left" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:kagekirin.github.com">
	</form>
	<div class="social right">
		
		
		<a class="google" href="https://plus.google.com/kurisu.kirin@gmail.com" title="Google+">Google+</a>
		
		
		<a class="twitter" href="http://twitter.com/KageKirin" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/KageKirin" title="GitHub">GitHub</a>
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</div>

</header>
	
<div id="banner" class="inner">
	<div class="container">
		<ul class="feed"></ul>
	</div>
	<small><a href="http://twitter.com/KageKirin">KageKirin</a> @ <a href="http://twitter.com">Twitter</a></small>
	<div class="loading">Loading...</div>
</div>
<script src="/javascripts/twitter.js"></script>
<script type="text/javascript">
	(function($){
		$('#banner').getTwitterFeed('KageKirin', 5, false);
	})(jQuery);
</script>

	<div id="content" class="inner"><article class="post">
    <h1 class="title">Mulberry Jam (Cont'd)</h1>
    <div class="entry"><p>Follow up on last week&#8217;s post about Mulberry.</p>

<p>There have been a couple of changes with Xcode 4.3, iOS 5.1 and some updates in Mulberry that gave me a hard time&#8230;
In the end, I had to re-scaffold my test-apps from scratch and move my content over because of a few noteworthy changes.<br/>
Incidentally, those changes concern the parts I did not treat in detail in my last post (or just brushed over without investigating it into depth),
thus this follow-up makes a lot of sense.</p>

<p>Giving the demo-app &#8220;kitchensink&#8221; (located in <code>demos</code>) a closer look cleared a couple of questions I still had, so here I go:</p>

<h2>Customization</h2>

<h3>Page-defs</h3>

<p>A page-def defines the template for generated pages, i.e. the layout, components and capabilities to be used on a page.<br/>
Custom page-defs can be generated with the command below:</p>

<pre><code>mulberry create page_def &lt;name&gt;
</code></pre>

<p>which will create a file at <code>&lt;app-root&gt;/page_defs/&lt;name&gt;.yml</code>.<br/>
More info <a href="https://github.com/Toura/mulberry/wiki/Page-Definitions">here</a></p>

<p>All pre-existing page-defs lie in <code>&lt;mulberry-root&gt;/base_apps/toura/page_defs</code> and have their purpose written in their name, making it easy to guess what they may be intended for.<br/>
Here&#8217;s a list of them, subject to changes as new versions arise:</p>

<pre><code>audio-with-images-phone.yml
audio-with-images-tablet.yml
debug.yml
default.yml
favorites.yml
feed-item.yml
feed-list-phone.yml
feed-list-tablet.yml
full-screen-images.yml
google-map-phone.yml
google-map-tablet.yml
grid-view.yml
home-phone.yml
home-tablet.yml
home-with-header-phone.yml
home-with-header-tablet.yml
hotspots.yml
images-and-text-phone.yml
images-and-text-tablet.yml
location-list.yml
node-gallery.yml
search.yml
videos-and-text-phone.yml
videos-and-text-tablet.yml
</code></pre>

<p>If you are creating your own page-defs for more than one project, it would probably make sense to put them inside this folder (and to commit them back to the Mulberry project in order to contribute to it).</p>

<p>A page-def defines which components will be visible for pages based on it. E.g.:</p>

<pre><code>home-with-header-phone:
  screens:
  - name: index
    backgroundImage: true
    regions:
    - className: header-image
      components:
      - PageHeaderImage

    - scrollable: true
      components:
      - BodyText
      - ChildNodes

    - className: nav
      components:
      - AppNav
</code></pre>

<h3>Components</h3>

<pre><code>mulberry create component &lt;name&gt;
</code></pre>

<p>which will create a Dojo UI component at <code>&lt;app-root&gt;/app/components/&lt;name&gt;.js</code> and <code>&lt;app-root&gt;/app/components/&lt;name&gt;/&lt;name&gt;.haml</code>).<br/>
See <a href="https://github.com/Toura/mulberry/wiki/Creating-Custom-Components">here</a> for more info.</p>

<h3>Capability</h3>

<p><strong>obsolete</strong></p>

<pre><code>mulberry create capability &lt;name&gt;
</code></pre>

<p>which will create a file at <code>&lt;app-root&gt;/javascript/capabilities/&lt;name&gt;.js</code>.<br/>
<a href="https://github.com/Toura/mulberry/wiki/Capabilities">More info</a></p>

<h3>Datasource</h3>

<pre><code>mulberry create datasource &lt;name&gt;
</code></pre>

<p>which will create a JSON file at <code>&lt;app-root&gt;/assets/data/&lt;name&gt;.json</code>. It can hold any data (as long as it&#8217;s valid JSON) and it&#8217;s up to the app to implement the functionality to read and use it.</p>

<h3>Feature flags</h3>

<p>See <a href="https://github.com/Toura/mulberry/wiki/Feature-Flags">here</a> for info on feature flags that determine whether a given feature is active or not.</p>

<h2>Xcode-side customization</h2>

<h3>App Icon, Splash Screen, and Project file</h3>

<p>When generating the app, the default PhoneGap app icon and splash screen, as well as the default Toura (xcodeproj) projects are copied into the app&#8217;s <code>&lt;app-root&gt;/build</code> folder,
where they can be further customized. (Although I&#8217;m not sure if re-generating the app overwrites the customized versions).</p>

<p>The source files are located at <code>&lt;mulberry-root&gt;/builder/project_templates/iOS/Toura</code> for the projects and further below in <code>&lt;mulberry-root&gt;/builder/project_templates/iOS/Toura/Resources/icons</code>
and <code>&lt;mulberry-root&gt;/builder/project_templates/iOS/Toura/Resources/splash</code> respectively for icons and splash screens.</p>

<p>It would be a nice extension to Mulberry if I could refer to my custom icons, loading screens, etc. in the config.yml and having those replace the default versions.</p>

<h3>Universal build</h3>

<p>At the moment, the iPhone and iPad have 2 separate projects (<code>Toura.xcodeproj</code> and <code>Toura-iPad.xcodeproj</code>).
But I guess, having a third <code>Toura-universal.xcodeproj</code> for universal apps might be another welcome extension.</p>

<h3>Automatic build</h3>

<p>Command line and Jenkins integration
<a href="http://nachbaur.com/blog/building-ios-apps-for-over-the-air-adhoc-distribution">This link</a> looks helpful.</p>

<p><strong>tl;dr</strong> I hope this short guide was useful to you.<br/>
I&#8217;ve created a <a href="/help/mulberry-cheat-sheet.html">help page</a> and although it&#8217;s more a reminder for myself, you can use it as an easy overview.</p>

<p>Next up: Further Mulberry app customization &#8211; adapting style and layout.</p>
</div>
    <div class="meta">
        <div class="date">








  


<time datetime="2012-03-14T01:00:00+09:00" pubdate data-updated="true">Mar 14<span>th</span>, 2012</time></div>
        <div class="tags">

</div>
        
        <span class="comments"><a href="#disqus_thread">Comments</a></span>
        
    </div>
</article>
<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
	
	
	<a class="addthis_button_tweet"></a>
	
	
	<a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
	
	<a class="addthis_counter addthis_pill_style"></a>
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>


<section id="comment">
    <h1 class="title">Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>
</div>
	<footer class="inner">Copyright &copy; 2012

    Chris Helmich

</footer>
	<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script src="/javascripts/slash.js"></script>


<script type="text/javascript">
      var disqus_shortname = 'kagekirin';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://kagekirin.github.com/blog/2012/03/14/mulberry-jam-contd/';
        var disqus_url = 'http://kagekirin.github.com/blog/2012/03/14/mulberry-jam-contd/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



</body>
</html>